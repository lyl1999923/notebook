# c++基础
## 宏定义
- **#运算符**：
是将其后面的参数转换成字符串， ##代表字符串连接
- **宏定义与内联函数的区别**：
宏定义仅仅是字符串替换，在预编译阶段处理；内联函数是函数，在编译阶段处理。两者都是为了节省函数调用的开销。

> 内联函数inline关键字定义，只能短函数体，也可定义时同时给出声明

- **宏定义时的宏展开错误**：
需要利用括号将整个宏定义内容括起来防止表达式运算顺序错误

## 变量
 - **类型转换操作符**:
 static_cast：基本类型转换，需要同一类（父子也可）
 dynamic_cast：对象指针类型转换，类型完全匹配
 const_cast：增删const属性，移除常量指针特性赋值
 reinterpret_cast：强转换，不论两个类型是否继承关系
 - **静态全局变量**
 不能使用extern导出，仅在当前文件下使用
 > 全局变量和局部变量是从变量的作用域的角度划分。
静态变量和动态变量是从变量的内存分配的角度划分
## 条件与循环
- switch后case每层都需要break，否则会按序进行
- for（初始化只执行一次；循环条件表达式；更新变量最后执行）
- 不用条件，单层循环，输出n行乘法表
```
char flag[3]=“ \n”;
while(row<=n){
  cout<<row*column<<flag[column/row];
  int tep=column%row+1;
  row=row+column/row;
  column=tep;
}
```
## sizeof
- **不能使用sizeof计算**：
结构体内位域、函数、void函数返回值等不明确类型
- **内存对齐**
规则1：占据内存大小按字节对齐，如int占4字节，内存开始地址必须是4的倍数
规则2：总大小必须是最大类型的倍数，如结构体内有double int，结果必须是8的倍数字节
规则3：如果有数组，则按数组单元算，如char[4]虽然占4个字节，但结果可以是1的倍数
## 内存分配
- **malloc**
malloc与free成对出现，否则会造成内存泄露，malloc开辟的空间在堆内存里，地址来源于可用空间链表
- **new delete**
c++为了更好支持面向对象满足操作类需要引入，new不仅申请空间还初始化，delete先调用析构函数再释放堆上的空间
- **malloc和new的区别**
1、malloc是c提供的库函数，通过函数调用访问，需要传递参数并接收返回值；new是c++提供的运算符；
2、malloc只能应用于基本类型；new可以用于自定义类型
3、malloc返回void*类型需要类型转换；new不需要
4、malloc没有初始化功能
- **delete与delete[]的区别**
当数组元素是基本类型时都可以释放空间，但自定义类型时只能通过delete[]释放（调用所有元素的析构函数）
- delete和free只能释放堆内存，栈空间只能系统释放
## 位运算
- **不使用临时变量交换两个数**
三次异或操作（也可以加减操作）
```
a=a^b;
b=a^b;//A=A^B^B（异或满足交换律，自己异或自己为0）
a=a^b;//B=A^B^A
```
- **计算二进制中1的个数**
按位与操作，每次右移1位，与1为真，cnt++
- **二进制数倒数m位的前n位取反**
与N个M位开始的1进行异或操作（看见取反想异或）
- **数组去重**
唯一：异或操作（交换律、自身为0）
不唯一：先分组，后异或
## main函数
main函数第一行代码执行前会调用全局对象和静态对象的构造函数，初始化全局变量和静态变量：main的最后一行代码执行后会在atexit中注册函数并且调用顺序和注册顺序相反


    

